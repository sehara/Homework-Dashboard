<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework - UChicago MBA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #800000 0%, #5a0000 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #800000 0%, #5a0000 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .update-button {
            background: white;
            color: #800000;
            border: none;
            padding: 12px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .update-button:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .update-button:active {
            transform: translateY(0);
        }

        .summary-section {
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .summary-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #800000;
            margin-bottom: 25px;
            text-align: center;
        }

        .course-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .course-card {
            background: white;
            border-radius: 15px;
            padding: 25px 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-top: 6px solid #800000;
            text-align: center;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .course-card.low-workload { border-top-color: #28a745; }
        .course-card.medium-workload { border-top-color: #ffc107; }
        .course-card.high-workload { border-top-color: #dc3545; }
        .course-card.completed {
            border-top-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }

        .course-card-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #800000;
            margin-bottom: 20px;
            min-height: 2.5em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .course-card-hours {
            font-size: 3.5em;
            font-weight: bold;
            color: #800000;
            margin: 15px 0 5px 0;
            line-height: 1;
        }

        .course-card.low-workload .course-card-hours { color: #28a745; }
        .course-card.medium-workload .course-card-hours { color: #ffc107; }
        .course-card.high-workload .course-card-hours { color: #dc3545; }
        .course-card.completed .course-card-hours {
            font-size: 2.5em;
            color: #28a745;
        }

        .course-card-hours-label {
            font-size: 0.9em;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .course-card-due {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.85em;
            color: #dc3545;
            font-weight: 600;
            margin-top: 15px;
        }

        .pro-tip {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border-left: 6px solid #28a745;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .pro-tip-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
        }

        .pro-tip-text {
            color: #495057;
            font-size: 1.05em;
        }

        .content {
            padding: 30px;
        }

        .day-section {
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            overflow: hidden;
        }

        .day-header {
            background: linear-gradient(135deg, #800000 0%, #5a0000 100%);
            color: white;
            padding: 20px;
            font-size: 1.5em;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .day-header .arrow {
            transition: transform 0.3s ease;
            opacity: 0.7;
            font-size: 0.9em;
        }

        .day-header.collapsed .arrow {
            transform: rotate(-90deg);
        }

        .day-content {
            max-height: 10000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .day-content.collapsed {
            max-height: 0;
        }

        .course-section {
            margin: 20px;
            border-left: 4px solid #800000;
            border-radius: 8px;
            overflow: hidden;
        }

        .course-header {
            background: #f8f9fa;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .course-header:hover { background: #e9ecef; }
        .course-title { font-size: 1.3em; font-weight: bold; color: #800000; }
        .course-due { color: #dc3545; font-weight: bold; font-size: 0.9em; }
        .course-arrow { transition: transform 0.3s ease; color: #adb5bd; font-size: 0.9em; opacity: 0.6; }
        .course-header.collapsed .course-arrow { transform: rotate(-90deg); }

        .course-content {
            max-height: 5000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 20px 20px 20px;
        }

        .course-content.collapsed {
            max-height: 0;
            padding: 0 20px;
        }

        .task-category { margin: 20px 0; }
        .category-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #495057;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background: #e9ecef;
            border-radius: 8px;
            border-left: 4px solid #800000;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
        }

        .category-title:hover { background: #dee2e6; }
        .category-title.collapsed .category-arrow { transform: rotate(-90deg); }
        .category-arrow { transition: transform 0.3s ease; color: #ced4da; font-size: 0.75em; opacity: 0.5; }

        .category-content {
            max-height: 3000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-top: 15px;
        }

        .category-content.collapsed {
            max-height: 0;
            margin-top: 0;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            margin: 10px 0 10px 35px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .task-item.completed { opacity: 0.35; background-color: #f8f9fa; }
        .task-item.scheduled { background-color: #e3f2fd; border-left: 3px solid #2196F3; }
        .task-checkbox { width: 24px; height: 24px; margin-right: 15px; cursor: pointer; flex-shrink: 0; margin-top: 2px; }
        .task-details { flex: 1; }
        .task-title { font-weight: 500; margin-bottom: 8px; font-size: 1.05em; }
        .task-item.completed .task-title { text-decoration: line-through; }
        .task-meta { display: flex; flex-wrap: wrap; gap: 15px; align-items: center; }
        .task-time { color: #6c757d; font-size: 0.95em; }
        .task-points { color: #800000; font-size: 0.95em; font-weight: 600; }
        .task-link { color: #800000; text-decoration: none; font-size: 0.95em; }
        .task-link:hover { text-decoration: underline; }

        .task-calendar-link {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.2s;
            display: inline-block;
        }

        .task-calendar-link.scheduled { background: linear-gradient(135deg, #2196F3, #1976D2); }

        .task-notes-area { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 5px; border-left: 3px solid #800000; }
        .task-notes-textarea { width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 5px; font-family: inherit; font-size: 0.9em; resize: none; overflow: hidden; }

        @media (max-width: 1200px) { .course-cards { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .course-cards { grid-template-columns: 1fr; }
            .content { padding: 15px; }
            .day-header { font-size: 1.2em; }
            .task-item { margin-left: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Homework</h1>
            <p id="dateRange">UChicago MBA | Next 14 Days</p>
            <button id="updateButton" class="update-button" onclick="updateHomework()">üîÑ Update Homework</button>
        </div>

        <div class="summary-section">
            <div class="summary-title">‚ö†Ô∏è Remaining Work This Week</div>
            <div class="course-cards" id="courseCards"></div>
            <div class="pro-tip">
                <div class="pro-tip-title">üí° Pro Tip</div>
                <div class="pro-tip-text">Start Corporate Governance readings today (Saturday) - spread 2-3 hours per day to avoid cramming Thursday night!</div>
            </div>
        </div>

        <div class="content" id="content"></div>
    </div>

    <script>
        const courseInfo = {
            "MANAGING (BUSN 38001)": { color: "#800000", syllabus: "https://canvas.uchicago.edu/courses/67742" },
            "PE VC LAB (BUSN 34702)": { color: "#007bff", syllabus: "https://canvas.uchicago.edu/courses/65932" },
            "NEGOTIATION (BUSN 38103)": { color: "#28a745", syllabus: "https://canvas.uchicago.edu/courses/67439" },
            "CORPORATE GOVERNANCE (BUSN 42108)": { color: "#fd7e14", syllabus: "https://canvas.uchicago.edu/courses/69195" }
        };

        const courseData = {
            "Monday, January 5, 2026": {
                "PE VC LAB (BUSN 34702)|||Due: Monday, Jan 5 at 6:00 PM": {
                    submit: [
                        { title: "Assignment 1: Submit Student Bio", time: 0.5, points: 0, link: "https://canvas.uchicago.edu/courses/65932/assignments/790223" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Tuesday, January 6, 2026": {
                "MANAGING (BUSN 38001)|||Due: Tuesday, Jan 6 at 8:30 AM": {
                    submit: [
                        { title: "First class assignment", time: 0.5, points: 0, link: "https://canvas.uchicago.edu/courses/67742/assignments/818415" },
                        { title: "Class participation - Week 1", time: 0, points: 2, link: "#" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Friday, January 9, 2026": {
                "CORPORATE GOVERNANCE (BUSN 42108)|||Due: Friday, Jan 9 at 12:01 AM": {
                    submit: [
                        { title: "Week 1: Reading Assignment", time: 3.0, points: 0, link: "https://canvas.uchicago.edu/courses/69195/assignments/831823" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Monday, January 12, 2026": {
                "PE VC LAB (BUSN 34702)|||Due: Monday, Jan 12 at 6:00 PM": {
                    submit: [
                        { title: "Case 1: Andreessen-Horowitz", time: 4.0, points: 30, link: "https://canvas.uchicago.edu/courses/65932/assignments/790226" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Tuesday, January 13, 2026": {
                "MANAGING (BUSN 38001)|||Due: Tuesday, Jan 13 at 8:30 AM": {
                    submit: [
                        { title: "Thought paper 1 - Week 2", time: 2.0, points: 4, link: "https://canvas.uchicago.edu/courses/67742/assignments/818416" },
                        { title: "Class participation - Week 2", time: 0, points: 1.5, link: "#" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Wednesday, January 14, 2026": {
                "NEGOTIATION (BUSN 38103)|||Due: Wednesday, Jan 14 at 11:59 PM": {
                    submit: [
                        { title: "Prep Sheet - New Recruit Negotiation", time: 1.5, points: 3, link: "https://canvas.uchicago.edu/courses/67439/assignments/838582" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Friday, January 16, 2026": {
                "CORPORATE GOVERNANCE (BUSN 42108)|||Due: Friday, Jan 16 at 12:00 PM": {
                    submit: [
                        { title: "Week 2: Morgan Stanley/Sears", time: 5.0, points: 36, link: "https://canvas.uchicago.edu/courses/69195/assignments/831824" }
                    ],
                    reading: [], required: [], optional: []
                }
            },
            "Tuesday, January 20, 2026": {
                "MANAGING (BUSN 38001)|||Due: Tuesday, Jan 20 at 8:30 AM": {
                    submit: [
                        { title: "Thought paper 2 - Week 3", time: 2.0, points: 4, link: "https://canvas.uchicago.edu/courses/67742/assignments/818417" },
                        { title: "Class participation - Week 3", time: 0, points: 1.5, link: "#" }
                    ],
                    reading: [], required: [], optional: []
                }
            }
        };

        let completedTaskIds = JSON.parse(localStorage.getItem('completedTasks')) || [];
        let scheduledTaskIds = JSON.parse(localStorage.getItem('scheduledTasks')) || [];
        let customTimeEstimates = JSON.parse(localStorage.getItem('customTimeEstimates')) || {};
        let taskNotes = JSON.parse(localStorage.getItem('taskNotes')) || {};
        let collapsedDays = JSON.parse(localStorage.getItem('collapsedDays')) || [];
        let collapsedCourses = JSON.parse(localStorage.getItem('collapsedCourses')) || [];
        let collapsedCategories = JSON.parse(localStorage.getItem('collapsedCategories')) || [];

        function formatTime(hours) {
            const totalMinutes = Math.round(hours * 60);
            const h = Math.floor(totalMinutes / 60);
            const m = totalMinutes % 60;
            if (h === 0) return `${m}m`;
            if (m === 0) return `${h}h`;
            return `${h}h ${m}m`;
        }

        function toggleTask(taskId) {
            const index = completedTaskIds.indexOf(taskId);
            if (index > -1) completedTaskIds.splice(index, 1);
            else completedTaskIds.push(taskId);
            localStorage.setItem('completedTasks', JSON.stringify(completedTaskIds));
            renderTasks();
        }

        function toggleScheduled(taskId) {
            const index = scheduledTaskIds.indexOf(taskId);
            if (index > -1) scheduledTaskIds.splice(index, 1);
            else scheduledTaskIds.push(taskId);
            localStorage.setItem('scheduledTasks', JSON.stringify(scheduledTaskIds));
            renderTasks();
        }

        function saveNote(taskId, note) {
            if (!note.trim()) delete taskNotes[taskId];
            else taskNotes[taskId] = note;
            localStorage.setItem('taskNotes', JSON.stringify(taskNotes));
        }

        function renderTasks() {
            const content = document.getElementById('content');
            const courseCards = document.getElementById('courseCards');
            content.innerHTML = '';
            courseCards.innerHTML = '';

            const courseTotals = {};
            Object.keys(courseInfo).forEach(c => courseTotals[c] = 0);

            Object.entries(courseData).forEach(([day, courses]) => {
                const dayId = day.replace(/[^a-z0-9]/gi, '');
                const daySection = document.createElement('div');
                daySection.className = 'day-section';
                
                const dayHeader = document.createElement('div');
                dayHeader.className = `day-header ${collapsedDays.includes(dayId) ? 'collapsed' : ''}`;
                dayHeader.innerHTML = `<span>${day}</span><span class="arrow">‚ñº</span>`;
                dayHeader.onclick = () => {
                    const idx = collapsedDays.indexOf(dayId);
                    if (idx > -1) collapsedDays.splice(idx, 1);
                    else collapsedDays.push(dayId);
                    localStorage.setItem('collapsedDays', JSON.stringify(collapsedDays));
                    renderTasks();
                };

                const dayContent = document.createElement('div');
                dayContent.className = `day-content ${collapsedDays.includes(dayId) ? 'collapsed' : ''}`;

                Object.entries(courses).forEach(([courseKey, categories]) => {
                    const [courseTitle, dueInfo] = courseKey.split('|||');
                    const courseId = (day + courseTitle).replace(/[^a-z0-9]/gi, '');
                    
                    const courseSection = document.createElement('div');
                    courseSection.className = 'course-section';
                    courseSection.style.borderLeftColor = courseInfo[courseTitle].color;

                    const courseHeader = document.createElement('div');
                    courseHeader.className = `course-header ${collapsedCourses.includes(courseId) ? 'collapsed' : ''}`;
                    courseHeader.innerHTML = `
                        <div class="course-title">${courseTitle}</div>
                        <div class="course-due">${dueInfo}</div>
                    `;
                    courseHeader.onclick = () => {
                        const idx = collapsedCourses.indexOf(courseId);
                        if (idx > -1) collapsedCourses.splice(idx, 1);
                        else collapsedCourses.push(courseId);
                        localStorage.setItem('collapsedCourses', JSON.stringify(collapsedCourses));
                        renderTasks();
                    };

                    const courseContent = document.createElement('div');
                    courseContent.className = `course-content ${collapsedCourses.includes(courseId) ? 'collapsed' : ''}`;

                    ['submit', 'reading', 'required', 'optional'].forEach(cat => {
                        if (categories[cat].length === 0) return;
                        
                        const catId = (courseId + cat).replace(/[^a-z0-9]/gi, '');
                        const catDiv = document.createElement('div');
                        catDiv.className = 'task-category';
                        
                        const catTitle = document.createElement('div');
                        catTitle.className = `category-title ${collapsedCategories.includes(catId) ? 'collapsed' : ''}`;
                        catTitle.innerHTML = `<span>${cat.toUpperCase()}</span><span class="category-arrow">‚ñº</span>`;
                        catTitle.onclick = (e) => {
                            const idx = collapsedCategories.indexOf(catId);
                            if (idx > -1) collapsedCategories.splice(idx, 1);
                            else collapsedCategories.push(catId);
                            localStorage.setItem('collapsedCategories', JSON.stringify(collapsedCategories));
                            renderTasks();
                        };

                        const catContent = document.createElement('div');
                        catContent.className = `category-content ${collapsedCategories.includes(catId) ? 'collapsed' : ''}`;

                        categories[cat].forEach(task => {
                            const taskId = (courseTitle + task.title).replace(/[^a-z0-9]/gi, '');
                            const isDone = completedTaskIds.includes(taskId);
                            const isScheduled = scheduledTaskIds.includes(taskId);
                            
                            if (!isDone) courseTotals[courseTitle] += task.time;

                            const taskItem = document.createElement('div');
                            taskItem.className = `task-item ${isDone ? 'completed' : ''} ${isScheduled ? 'scheduled' : ''}`;
                            taskItem.innerHTML = `
                                <input type="checkbox" class="task-checkbox" ${isDone ? 'checked' : ''} onclick="toggleTask('${taskId}')">
                                <div class="task-details">
                                    <div class="task-title">${task.title}</div>
                                    <div class="task-meta">
                                        ${task.time > 0 ? `<span class="task-time">‚è±Ô∏è ${formatTime(task.time)}</span>` : ''}
                                        ${task.points !== null ? `<span class="task-points">üèÜ ${task.points} pts</span>` : ''}
                                        <a href="${task.link}" class="task-link" target="_blank">üîó Canvas</a>
                                        <button class="task-calendar-link ${isScheduled ? 'scheduled' : ''}" onclick="toggleScheduled('${taskId}')">
                                            ${isScheduled ? 'üìÖ Scheduled' : 'üóìÔ∏è Add to Cal'}
                                        </button>
                                    </div>
                                    <div class="task-notes-area">
                                        <textarea class="task-notes-textarea" placeholder="Add notes..." onblur="saveNote('${taskId}', this.value)">${taskNotes[taskId] || ''}</textarea>
                                    </div>
                                </div>
                            `;
                            catContent.appendChild(taskItem);
                        });

                        catDiv.appendChild(catTitle);
                        catDiv.appendChild(catContent);
                        courseContent.appendChild(catDiv);
                    });

                    courseSection.appendChild(courseHeader);
                    courseSection.appendChild(courseContent);
                    dayContent.appendChild(courseSection);
                });

                daySection.appendChild(dayHeader);
                daySection.appendChild(dayContent);
                content.appendChild(daySection);
            });

            // Render Course Summary Cards
            Object.entries(courseTotals).forEach(([title, hours]) => {
                const card = document.createElement('div');
                card.className = `course-card ${hours === 0 ? 'completed' : hours < 3 ? 'low-workload' : hours < 7 ? 'medium-workload' : 'high-workload'}`;
                card.innerHTML = `
                    <div class="course-card-title">${title}</div>
                    <div class="course-card-hours">${hours === 0 ? '‚úÖ' : hours}</div>
                    <div class="course-card-hours-label">${hours === 0 ? 'Done' : 'Hours Left'}</div>
                `;
                courseCards.appendChild(card);
            });
        }

        function updateHomework() {
            window.location.reload();
        }

        window.onload = renderTasks;
    </script>
</body>
</html>
